<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Style Starts -->
    <style>

    </style>
    <!-- Style Ends -->

    <title>Kurtis's Dice game!</title>
</head>
<body>
    
    <h1>Welcome to Kurtis's Extravaganza Dice Roll Roundup Game </h1>
    <p>The aim is to be the first person to reach 100 points by rolling the dice as many times as you dare. Be careful though! if you roll a 1, your score resets to 0 and you'll have to start over again. To add insult to injury, you exit the game if you roll a 1 three times simulataneously!</p>
    <p>So how to win? Simply reach 100 points and avoid  those dastardly 1 rolls. Fear for your life? Press the hold button for the next player to have some rolls. </p>
    <p>One last rule to be mindful of; if your score is a multiple of 7, you lose your points and a life!

    <p>Please type the names of up to ten players. Done that and ready to play? Click 'Roll Dice' to begin... </p>
    </p>




    <!-- Player Table  -->
    <span id="player_title_name">Player Names: </span><span id="player_title_roll">Die Roll: </span><span id="player_title_lives">Lives:</span><br />
    <span id="player_0_name">Standing By </span><span id="player_0_score">0 </span><span id="player_0_lives">3 lives</span><br />
    <span id="player_1_name">Standing By </span><span id="player_1_score">0 </span><span id="player_1_lives">3 lives</span><br />
    <span id="player_2_name">Standing By </span><span id="player_2_score">0 </span><span id="player_2_lives">3 lives</span><br />
    <span id="player_3_name">Standing By </span><span id="player_3_score">0 </span><span id="player_3_lives">3 lives</span><br />
    <span id="player_4_name">Standing By </span><span id="player_4_score">0 </span><span id="player_4_lives">3 lives</span><br />
    <span id="player_5_name">Standing By </span><span id="player_5_score">0 </span><span id="player_5_lives">3 lives</span><br />
    <span id="player_6_name">Standing By </span><span id="player_6_score">0 </span><span id="player_6_lives">3 lives</span><br />
    <span id="player_7_name">Standing By </span><span id="player_7_score">0 </span><span id="player_7_lives">3 lives</span><br />
    <span id="player_8_name">Standing By </span><span id="player_8_score">0 </span><span id="player_8_lives">3 lives</span><br />
    <span id="player_9_name">Standing By </span><span id="player_9_score">0 </span><span id="player_9_lives">3 lives</span><br />

    <form onclick="return false"> <!-- Player name input form -->
        <input id="addPlayerName" type="text"></input>
        <button id="addPlayerButton" onclick="add_players()">Add name</button>
    </form>

    <div id="primaryDisplay">
        <p><span id="mainDisplayPlayerName">Active Player's name</span><span>'s turn</span>
           <span id="mainDisplayPlayerThrows">0</span><!-- Current dice throw count--> 
           <span id="mainDisplayPlayerScore">0</span> <!-- Score -->
           <span id="mainDisplayPlayerLives">3 lives</span> <!-- Lives --><p>

            <p><span id="game_messages">Let's begin...</span></span>
    <div> <!-- End primary display -->

    <form onclick="return false"><!-- Game buttons form -->
        <button id="rollDicebutton" onclick="dice_throw()">Roll Dice</button>
        <button id="holdButton" onclick="dice_hold()">Hold</button>
    </form>





    <!-- Javascript start --------------------------------------------------------------- -->
    <script>
        // Variables
        const active_player = []; //Array of players for the game 
        const player_lives = []; //Array of lives for each player (line them up well!
        const player_score = []; // Array of scores!
        let dice_result = 0;
        let  player_name = "";
        let in_session = 0; //Checks if the game is currently "in session" (or being played actively)
        let namesCount = 0; // This is an INDEX function. Renamed specifically for the add_players function. 
        let indexCount = 0; // Another INDEX function. Named specifically for the dice_throw() function.


        function add_players(){
            player_name = document.getElementById("addPlayerName").value;
            active_player.push(player_name);
            player_lives.push(3);
            player_score.push(0);
            
            
            /* Game name replacement start! */
            document.getElementById("player_"+ namesCount +"_name").innerText = active_player[namesCount] + " "; //Replaces the player names
            document.getElementById("player_"+ namesCount +"_lives").innerText = player_lives[namesCount] + " lives"; //Replaces the player lives
            document.getElementById("player_"+ namesCount +"_score").innerText = player_score[namesCount]; //Replaces the player lives
            
            namesCount += 1; // Increase index so that players can add up to ten names
            /* Game name replacement end */
            
            console.log("Active player inside function: " + active_player);
            console.log(player_lives);
 
        };

        function primary_display_update(){
            document.getElementById("mainDisplayPlayerName").innerText = active_player[indexCount];
            document.getElementById("mainDisplayPlayerScore").innerText = player_score[indexCount];
            document.getElementById("mainDisplayPlayerLives").innerText = player_lives[indexCount];
            document.getElementById("mainDisplayPlayerThrows").innerText = dice_result;

            for (let forIndex = 0; forIndex < active_player.length; forIndex++){
                document.getElementById("player_"+ forIndex +"_name").innerText = active_player[forIndex] + " "; //Replaces the player names
                document.getElementById("player_"+ forIndex +"_lives").innerText = player_lives[forIndex] + " lives"; //Replaces the player lives
                document.getElementById("player_"+ forIndex +"_score").innerText = player_score[forIndex] + " "; //Replaces the player lives
            }
        };

        function next_turn_check() {

            if (indexCount >= active_player.length - 1) {// Simply checks if next entry in array exists
                indexCount = 0; 
                        
            } else if (active_player[indexCount] == undefined){ // Checks if current player is "undefined," reset array index to 0
                 indexCount = 0;     
            
            } else {
                indexCount += 1;
            }


                 


        }

        function dice_roll(){
            dice_result = Math.floor(Math.random() * 6) + 1;
            console.log(); 

        };


        

        // Main game! //
        indexCount = 0;
        
        function dice_throw(){

            dice_roll()

            if (player_score[indexCount] + dice_result >= 100){ //Checked if roll is over 100!
                player_score[indexCount] = 100;
                document.getElementById("game_messages").innerText = active_player[indexCount] + " has won this game! Congratulations! You rolled a " + dice_result + ".";
            
            } else if (player_lives[indexCount] == 0){ // Checks if curent player has lives 
                next_turn_check();
                document.getElementById("game_messages").innerText = "You have no lives left! Pass the dice to " + active_player[indexCount];



            } else if (dice_result != 1) {
                player_score[indexCount] += dice_result;
                document.getElementById("game_messages").innerText = "You have rolled a " + dice_result + ", your current score is: " + player_score[indexCount];
                

            } else if (dice_result == 1) {
                player_score[indexCount] = 0;
                player_lives[indexCount] -= 1;
                
                next_turn_check();
                document.getElementById("game_messages").innerText = "Oh no! You rolled a 1. Oops. You've just lost your points! You've forfeit your turn. Next up: " + active_player[indexCount];
            } 


            
            




            primary_display_update()
        }

        function dice_hold(){
            


            next_turn_check()
            document.getElementById("game_messages").innerText = "You've chosen to hold? Probably smart. Next up is: " + active_player[indexCount];
    
    
    
    
            primary_display_update;
        }
        
                  
            





        





    </script>
</body>
</html>